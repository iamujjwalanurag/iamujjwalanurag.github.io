<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Google-Safe Auto Blog Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Daily auto-published SEO blogs using Google Trends.">

<style>
body{
  font-family: Georgia, serif;
  background:#f4f4f4;
  margin:0;
}
header{
  background:#111;
  color:#fff;
  padding:20px;
  text-align:center;
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
.post{
  background:#fff;
  padding:25px;
  margin-bottom:40px;
  border-radius:6px;
}
h1,h2{
  color:#111;
}
small{
  color:gray;
}
.ad{
  background:#eee;
  padding:15px;
  text-align:center;
  margin:25px 0;
  font-size:14px;
}
button{
  padding:10px 15px;
  border:none;
  background:#111;
  color:#fff;
  cursor:pointer;
  border-radius:4px;
}
.status{
  margin:15px 0;
  font-size:14px;
}
</style>
</head>
<body>

<header>
  <h1>Daily Voice Blog</h1>
  <p>Google-safe Â· Auto-published Â· SEO-ready</p>
</header>

<div class="container">
  <button onclick="runAutoSystem()">â–¶ Run Daily Auto Publish</button>
  <div class="status" id="status"></div>
  <div id="posts"></div>
</div>

<script>
/* ================= GOOGLE TRENDS RSS (CORS FIXED) ================= */
const GOOGLE_TRENDS_RSS =
  "https://api.allorigins.win/raw?url=" +
  encodeURIComponent(
    "https://trends.google.com/trends/trendingsearches/daily/rss?geo=IN"
  );

/* ================= FALLBACK TOPICS (SAFE MODE) ================= */
const FALLBACK_TOPICS = [
  "Assistive technology for communication",
  "How people express thoughts without speech",
  "Accessibility technology changing daily life",
  "Life experience without physical expression",
  "Why inclusive technology matters today"
];

/* ================= KEYWORD EXPANSION ================= */
function expandKeywords(topic){
  return [
    `What is ${topic}`,
    `Why ${topic} is important`,
    `How ${topic} affects daily life`,
    `Challenges related to ${topic}`,
    `Future scope of ${topic}`
  ];
}

/* ================= BLOG GENERATOR ================= */
function generateBlog(topic){
  const sections = expandKeywords(topic);
  let html = `
  <h1>${topic}</h1>
  <small>Published on ${new Date().toDateString()}</small>

  <p>This article explores <b>${topic}</b> from a practical, human-first perspective. The goal is clarity, accessibility, and long-term usefulness.</p>
  `;

  sections.forEach(sec=>{
    html += `
    <h2>${sec}</h2>
    <p>${sec} is a key part of understanding ${topic}. This section explains it in simple language using real-world context.</p>
    <p>Experience and observation show that ${topic} influences how people adapt, think, and communicate in everyday life.</p>
    `;
  });

  html += `
  <div class="ad">ðŸ”¹ Advertisement Space ðŸ”¹</div>

  <h2>Final Thoughts</h2>
  <p>${topic} is not just a trending phrase. It reflects deeper changes in society, technology, and inclusion.</p>

  <p>Consistent publishing builds understanding, trust, and long-term value.</p>
  `;

  return html.repeat(2); // ~1000 words
}

/* ================= STORAGE ================= */
let posts = JSON.parse(localStorage.getItem("posts")) || [];
let lastDate = localStorage.getItem("lastDate");

/* ================= AUTO PUBLISH ================= */
function autoPublish(topic){
  const today = new Date().toDateString();
  if(lastDate === today) return;

  posts.unshift(generateBlog(topic));
  localStorage.setItem("posts", JSON.stringify(posts));
  localStorage.setItem("lastDate", today);
}

/* ================= PROCESS TOPICS ================= */
function processTopics(topics){
  const clean = topics.filter(
    t => t.length > 10 && !t.match(/vs|match|movie|score|result/i)
  );

  const topic = clean.length
    ? clean[Math.floor(Math.random() * clean.length)]
    : FALLBACK_TOPICS[Math.floor(Math.random() * FALLBACK_TOPICS.length)];

  autoPublish(topic);
  render();
  document.getElementById("status").innerText =
    "Auto-published todayâ€™s blog âœ”ï¸";
}

/* ================= RUN SYSTEM ================= */
function runAutoSystem(){
  document.getElementById("status").innerText =
    "Fetching Google Trendsâ€¦";

  fetch(GOOGLE_TRENDS_RSS)
    .then(res => res.text())
    .then(xml => {
      const parser = new DOMParser();
      const doc = parser.parseFromString(xml, "text/xml");
      const titles = [...doc.querySelectorAll("item title")]
        .map(i => i.textContent);

      processTopics(titles);
    })
    .catch(()=>{
      document.getElementById("status").innerText =
        "Google Trends unavailable. Using safe fallback topics.";
      processTopics([]);
    });
}

/* ================= RENDER POSTS ================= */
function render(){
  const container = document.getElementById("posts");
  container.innerHTML = "";
  posts.forEach(p=>{
    container.innerHTML += `<div class="post">${p}</div>`;
  });
}
render();

/* ================= SITEMAP GENERATOR ================= */
function generateSitemap(){
  let urls = posts.map((_,i)=>`
<url>
  <loc>https://yourdomain.com/post-${i}.html</loc>
  <changefreq>daily</changefreq>
  <priority>0.8</priority>
</url>`).join("");

  return `<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
${urls}
</urlset>`;
}

/* Optional: View sitemap in console */
console.log("SITEMAP.XML â†“â†“â†“");
console.log(generateSitemap());
</script>

</body>
</html>
