<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Auto Blog Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Google-safe daily auto blog">

<link rel="manifest" href="data:application/json,{
  &quot;name&quot;:&quot;AutoBlog&quot;,
  &quot;short_name&quot;:&quot;AutoBlog&quot;,
  &quot;start_url&quot;:&quot;.&quot;,
  &quot;display&quot;:&quot;standalone&quot;
}">
<meta name="theme-color" content="#111">

<style>
body{margin:0;font-family:Georgia,serif;background:#f4f4f4}
header{background:#111;color:#fff;padding:20px;text-align:center}
.container{max-width:900px;margin:auto;padding:20px}
.post{background:#fff;padding:25px;margin-bottom:40px;border-radius:6px}
button,select{padding:10px 15px;background:#111;color:#fff;border:none;border-radius:4px;cursor:pointer}
small{color:gray}
.ad{background:#eee;padding:15px;margin:25px 0;text-align:center}
.switch{background:#ddd;color:#000;margin:5px}
</style>
</head>

<body>

<header>
  <h1 id="brandName">Daily Voice Blog</h1>
  <p id="brandTagline">Google-safe · Auto-published · Accessible</p>
</header>

<div class="container">

<select onchange="setLang(this.value)">
  <option value="en">English</option>
  <option value="hi">हिन्दी</option>
</select>

<button onclick="runSystem()">▶ Run Auto System</button>

<h3>Accessibility Input</h3>
<button class="switch" onclick="binary(true)">YES</button>
<button class="switch" onclick="binary(false)">NO</button>

<p id="status"></p>
<div id="posts"></div>

</div>

<script>
/* ========= BRAND ========= */
const BRAND={name:"Daily Voice Blog",tagline:"Google-safe · Auto-published · Accessible"};
brandName.innerText=BRAND.name;
brandTagline.innerText=BRAND.tagline;

/* ========= LANGUAGE ========= */
let LANG="en";
const TEXT={en:{final:"Final Thoughts"},hi:{final:"अंतिम विचार"}};
function setLang(l){LANG=l;render();}

/* ========= GOOGLE TRENDS (CHANGE TO YOUR WORKER URL FOR 100%) ========= */
const TRENDS_URL="https://api.allorigins.win/raw?url="+
encodeURIComponent("https://trends.google.com/trends/trendingsearches/daily/rss?geo=IN");

/* ========= FALLBACK ========= */
const FALLBACK=[
  "Accessibility technology in daily life",
  "Expressing thoughts without speech",
  "Inclusive technology in India",
  "Human thinking beyond physical limits"
];

/* ========= KEYWORDS ========= */
function expand(t){
  return [
    `What is ${t}`,
    `Why ${t} matters`,
    `How ${t} affects life`,
    `Challenges of ${t}`,
    `Future of ${t}`
  ];
}

/* ========= BLOG ========= */
function blog(topic){
  let h=`<h1>${topic}</h1><small>${new Date().toDateString()}</small>`;
  expand(topic).forEach(s=>{
    h+=`<h2>${s}</h2>
        <p>${s} explains ${topic} in simple human language.</p>
        <p>Real experience adds depth and understanding.</p>`;
  });
  h+=`<div class="ad">Advertisement</div>
      <h2>${TEXT[LANG].final}</h2>
      <p>${topic} reflects deeper social and technological change.</p>`;
  return h.repeat(2);
}

/* ========= STORAGE ========= */
let posts=JSON.parse(localStorage.getItem("posts"))||[];
let last=localStorage.getItem("last");

/* ========= AUTO PUBLISH ========= */
function publish(topic){
  let d=new Date().toDateString();
  if(last===d)return;
  posts.unshift(blog(topic));
  localStorage.setItem("posts",JSON.stringify(posts));
  localStorage.setItem("last",d);
}

/* ========= RUN SYSTEM ========= */
function runSystem(){
  status.innerText="Running…";
  fetch(TRENDS_URL)
    .then(r=>r.text())
    .then(x=>{
      let doc=new DOMParser().parseFromString(x,"text/xml");
      let t=[...doc.querySelectorAll("item title")].map(i=>i.textContent);
      let clean=t.filter(a=>a.length>10);
      let topic=clean.length?clean[Math.floor(Math.random()*clean.length)]
                            :FALLBACK[Math.floor(Math.random()*FALLBACK.length)];
      publish(topic);render();
      status.innerText="Published ✔️";
    })
    .catch(()=>{
      publish(FALLBACK[Math.floor(Math.random()*FALLBACK.length)]);
      render();
      status.innerText="Fallback used ✔️";
    });
}

/* ========= ACCESSIBILITY ========= */
let decisions=[];
function binary(v){
  decisions.push(v);
  if(decisions.length>=5){
    publish(FALLBACK[decisions.filter(Boolean).length%FALLBACK.length]);
    decisions=[];render();
  }
}

/* ========= RENDER ========= */
function render(){
  postsDiv=posts.map(p=>`<div class="post">${p}</div>`).join("");
  document.getElementById("posts").innerHTML=postsDiv;
}
render();

/* ========= SITEMAP ========= */
function sitemap(){
  return posts.map((_,i)=>`/post-${i}.html`).join("\n");
}
console.log("SITEMAP:\n"+sitemap());
</script>

</body>
</html>
